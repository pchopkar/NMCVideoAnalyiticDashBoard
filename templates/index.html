<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    
    <!-- <link rel="stylesheet" href="main.css"> -->
    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/js/bootstrap-select.min.js"></script>
    <script src="./templates/main.js"></script>
   
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <TITLE>NMC Video Analytic DashBoard</TITLE>
  </head>
  <body>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
   
    <div class="col-md-6 offset-md-3 mt-5">
    
         <h1 align="center" >NMC Video Analytic Portal</h1>
         <br>
         <form accept-charset="UTF-8" action="count" method="POST" enctype="multipart/form-data" target="_blank">
           <!-- <div class="form-group">
             <label for="exampleInputName">Full Name</label>
            <select class="form-control" id="exampleFormControlSelect1" name="platform" required="required">
               <option>Github</option>
               <option>Gitlab</option>
               <option>Bitbucket</option>
             </select>
           </div>
           <div class="form-group">
             <label for="exampleInputEmail1" required="required">Email address</label>
             <select class="form-control" id="exampleFormControlSelect1" name="platform" required="required">
                <option>Github</option>
                <option>Gitlab</option>
                <option>Bitbucket</option>
              </select>
           </div> -->
           <div class="form-group">
            <label for="exampleFormControlSelect1">Medical College :</label>
            <!-- <select title="Select Medical College"  name="medicalcollegelist"  >
              {% for row in med_clg_list %}
              <option value='{{row}}'>{{row}}</option>
              {% endfor %}
            </select> -->
            <select title="Select Medical College" class="form-control select-input placeholder-active active focused" id="medicalcollegelist"  name="medicalcollegelist" >
              <option selected>--SELECT--</option>
              {% for row in med_clg_list %}
              <option value='{{row}}'>{{row}}</option>
              {% endfor %}
            </select>
            <hr>
       
             <label for="exampleFormControlSelect1">Camera Location Area : </label>
             <!-- <select class="form-control" id="CameraLocationArea" name="CameraLocationArea" required="required">
               <option selected>--SELECT--</option>
               {% for row in med_clg_list %}
              <option value='{{row}}'>{{row}}</option>
              {% endfor %}
             </select> -->
             <select name="CameraLocationArea"  id="CameraLocationArea" class="form-control" title="Select Camera Area">
              <option selected>--SELECT--</option> </select>
             <hr>

             <label for="exampleFormControlSelect1">Camera Location Sub Area :</label>
             <!-- <select class="form-control" id="CameraLocationSubArea" name="CameraLocationSubArea" required="required" title="Select Camera Sub Area">

               {% for row in med_clg_list %}
               <option value='{{row}}'>{{row}}</option>
               {% endfor %}
             </select> -->
             <select name="CameraLocationSubArea" data-live-search="true" id="CameraLocationSubArea" class="form-control" title="Select Camera Sub Area"> 
              <option selected>--SELECT--</option>
             </select>
             <hr>
         
             <label for="exampleFormControlSelect1">Date and Time :&nbsp;&nbsp;   
              <input type="datetime-local" id="Test_DatetimeLocal" name="Test_DatetimeLocal">
            </label>

           </div>
           <hr>
           <!-- <div class="frame"> -->
            <!-- <div class="center"> -->
                <!-- <div class="title">
                    <label for="exampleInputName">Upload a file</label>
                </div> -->
        
                <!-- <div class="dropzone">
                    <img src="http://100dayscss.com/codepen/upload.svg" class="upload-icon" />
                    <input type="file" name="uploadfile" class="upload-input" />
                </div> -->
        
                <!-- <button type="button" class="btn" name="uploadbutton">Upload file</button> -->
    
                <!-- <br>
                <button on type="submit" class="btn btn-primary">Upload file</button> -->
        
            <!-- </div> -->
           
            <br>
            <div class="col-md-12 text-center">
            <button name="submitCount"  id="submitCount" target="_self" type="submit" class="btn btn-primary btn-lg text-center" >Submit</button>
            </div>
            <!-- <button  target="_self" type="submit" class="btn btn-primary" >Submit</button> -->
          
        </div>
        
        <!-- original pen: https://codepen.io/roydigerhund/pen/ZQdbeN  -->
        <!-- NO JS ADDED YET -->
           <!-- <div class="form-group mt-3">
             <label class="mr-2">Upload your CV:</label>
             <input type="file" name="file">
           </div> -->

         </form>
    
         {% 
          if medicle_college and camera_location_area and camera_location_sub_area and date_and_time and filename and count : %}
         <br>
         
         <h1 align="center" >DashBoard</h1>
        
          <table class="table" style="width:50%" align="center">

            <thead align="center">
              <tr>
              <th class="table-primary">Medicle College </th>
              <th class="table-primary">{{medicle_college}}</th>
              </tr>
            </thead>
            <thead align="center">
              <tr>
                <th class="table-success">Camera Location Area </th>
                <th class="table-success">{{camera_location_area}}</th>
              </tr>
              </thead>
              <thead align="center">
                <tr>
                  <th class="table-danger">Camera Location Sub Area</th>
                  <th class="table-danger">{{camera_location_sub_area}}</th>
                </tr>
                </thead>
              <thead align="center">
              <tr>
                <th class="table-warning">Date And Time </th>
                <th class="table-warning">{{date_and_time}}</th>
              </tr>
              </thead>
              <br>
              <br>
              <table  style="width:50%" align="center" border="1px solid black">
                <thead align="center">
                  <tr>
                    <!-- <th scope="col">#</th> -->
                    <th scope="col">Image Name</th>
                    <th scope="col">Count</th>
                   
                  </tr>
                </thead>
                <tbody align="center">
                  
                    {% for i in range(0,len(filename)) %}
                    <tr>
                    <td><a href="www.google.com">{{filename[i]}}</a></td>
                    <td>{{count[i]}}</td>
                    </tr>
                    {% endfor %}
                    <!-- <th scope="row">1</th> -->

                  
                </tbody>
              </table>

              <!-- <thead align="center">
              <tr>
                <th class="table-danger">Head Count </th>
                <th class="table-danger">{{count}}</th>
              </tr>
              </thead> -->
              

            </table>
            <br>
            <br>
          
        {% endif  %}
        <script>
          $(document).ready(function () {
           
            var medicalcollegelistValue;
            var CameraLocationAreaValue;
            $(document).on("change", "#medicalcollegelist", function () {
              medicalcollegelistValue = $("#medicalcollegelist").val();
             
              load_data_area(medicalcollegelistValue);
            });
          
            function load_data_area( medicalcollegelistValue) {
                $.ajax({
                    url: "/cameraArea",
                    method: "POST",
                    data: {medicalcollegelistValue},
                    dataType: "json",
                    success: function (data) { 
                      
                      var html = "";
          
                      coll=data[0]
                      html += '<option value="">--SELECT--</option>"'
                                for (var count = 0; count < coll.length; count++) {
                                  
                                    html += '<option value="' + coll[count] + '">' + coll[count] + "</option>";
                                } 
                              
          
                                    $("#CameraLocationArea").html(html);
                                    
                                   
                                
                            },
                        });
                      }
          
                        $(document).on("change", "#CameraLocationArea", function () {
                           CameraLocationAreaValue =  $("#CameraLocationArea").val();
                          console.log(CameraLocationAreaValue)
                         
                          load_data_subarea(CameraLocationAreaValue);
                        });
                        
                        function load_data_subarea( CameraLocationAreaValue) {
                          $.ajax({
                              url: "/cameraSubArea",
                              method: "POST",
                              data: {medicalcollegelistValue,CameraLocationAreaValue},
                              dataType: "json",
                              success: function (data) { 
          
                                var html = "";
                                coll=data[0]
                                html += '<option value="">--SELECT--</option>"'
                                          for (var count = 0; count < coll.length; count++) {
                                           
                                              html += '<option value="' + coll[count] + '">' + coll[count] + "</option>";
                                          } 
                                        
              
                                              $("#CameraLocationSubArea").html(html);
                                              
                                            
                                          
                                      },
                                  });
                                }

                                /* $(document).on("submit", "#submitCount", function () {
                                  var CameraLocationSubAreaValue =  $("#CameraLocationSubArea").val();
                                  var Test_DatetimeLocalValue =  $("#Test_DatetimeLocal").val();
                                  load_submit(CameraLocationSubAreaValue,Test_DatetimeLocalValue);
                                
                                });
                                
                                function load_submit( CameraLocationSubAreaValue,Test_DatetimeLocalValue) {
                                  $.ajax({
                                      url: "/count",
                                      method: "POST",
                                      data: {medicalcollegelistValue,CameraLocationAreaValue,CameraLocationSubAreaValue,Test_DatetimeLocalValue},
                                      dataType: "json",
                                      success: function (data) { 
                  
                                        var html = "";
                                        coll=data[0]
                                                  for (var count = 0; count < coll.length; count++) {
                                                   
                                                      html += '<option value="' + coll[count] + '">' + coll[count] + "</option>";
                                                  } 
                                                
                      
                                                      $("#CameraLocationSubArea").html(html);
                                                      
                                                    
                                                  
                                              },
                                          });
                                        } */
           
          });
          
        </script>
  </body>
</html>

